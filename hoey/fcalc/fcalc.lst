     1                                  ; fcalc.asm
     2                                  extern printf
     3                                  section .data
     4 00000000 0000000000002240            number1     dq      9.0
     5 00000008 0000000000405240            number2     dq      73.0
     6 00000010 546865206E756D6265-         fmt         db      "The numbers are %f and %f", 10, 0
     6 00000019 727320617265202566-
     6 00000022 20616E642025660A00 
     7 0000002B 25732025660A00              fmtfloat    db      "%s %f", 10, 0
     8 00000032 54686520666C6F6174-         f_sum       db      "The float sum of %f and %f is %f", 10, 0
     8 0000003B 2073756D206F662025-
     8 00000044 6620616E6420256620-
     8 0000004D 69732025660A00     
     9 00000054 54686520666C6F6174-         f_dif       db      "The float difference of %f and %f is %f", 10, 0
     9 0000005D 20646966666572656E-
     9 00000066 6365206F6620256620-
     9 0000006F 616E64202566206973-
     9 00000078 2025660A00         
    10 0000007D 54686520666C6F6174-         f_mul       db      "The float product of %f and %f is %f", 10, 0
    10 00000086 2070726F6475637420-
    10 0000008F 6F6620256620616E64-
    10 00000098 202566206973202566-
    10 000000A1 0A00               
    11 000000A3 54686520666C6F6174-         f_div       db      "The float division of %f and %f is %f", 10, 0
    11 000000AC 206469766973696F6E-
    11 000000B5 206F6620256620616E-
    11 000000BE 642025662069732025-
    11 000000C7 660A00             
    12 000000CA 54686520666C6F6174-         f_sqrt      db      "The float square root of %f is %f", 10, 0
    12 000000D3 207371756172652072-
    12 000000DC 6F6F74206F66202566-
    12 000000E5 2069732025660A00   
    13                                  
    14                                  section .bss
    15                                  section .text
    16                                      global main
    17                                  
    18                                  main:
    19 00000000 55                          push    rbp
    20 00000001 4889E5                      mov     rbp, rsp
    21                                  
    22                                      ; print the numbers
    23 00000004 F20F100425-                 movsd   xmm0, [number1]
    23 00000009 [00000000]         
    24 0000000D F20F100C25-                 movsd   xmm1, [number2]
    24 00000012 [08000000]         
    25 00000016 48BF-                       mov     rdi, fmt
    25 00000018 [1000000000000000] 
    26 00000020 B802000000                  mov     rax, 2              ; two floats
    27 00000025 E8(00000000)                call printf
    28                                  
    29                                      ;sum
    30 0000002A F20F101425-                 movsd   xmm2, [number1]     ; double precision float into xmm
    30 0000002F [00000000]         
    31 00000033 F20F581425-                 addsd   xmm2, [number2]     ; add double precision to xmm
    31 00000038 [08000000]         
    32                                  
    33                                      ; print the result
    34 0000003C F20F100425-                 movsd   xmm0, [number1]
    34 00000041 [00000000]         
    35 00000045 F20F100C25-                 movsd   xmm1, [number2]
    35 0000004A [08000000]         
    36 0000004E 48BF-                       mov     rdi, f_sum
    36 00000050 [3200000000000000] 
    37 00000058 B803000000                  mov     rax, 3              ; three floats
    38 0000005D E8(00000000)                call printf
    39                                  
    40                                      ;difference
    41 00000062 F20F101425-                 movsd   xmm2, [number1]     ; double precision float into xmm
    41 00000067 [00000000]         
    42 0000006B F20F5C1425-                 subsd   xmm2, [number2]     ; substract double precision to xmm
    42 00000070 [08000000]         
    43                                  
    44                                      ; print the result
    45 00000074 F20F100425-                 movsd   xmm0, [number1]
    45 00000079 [00000000]         
    46 0000007D F20F100C25-                 movsd   xmm1, [number2]
    46 00000082 [08000000]         
    47 00000086 48BF-                       mov     rdi, f_dif
    47 00000088 [5400000000000000] 
    48 00000090 B803000000                  mov     rax, 3              ; three floats
    49 00000095 E8(00000000)                call printf
    50                                  
    51                                      ;multiplication
    52 0000009A F20F101425-                 movsd   xmm2, [number1]     ; double precision float into xmm
    52 0000009F [00000000]         
    53 000000A3 F20F591425-                 mulsd   xmm2, [number2]     ; multiply with xmm
    53 000000A8 [08000000]         
    54                                  
    55                                      ; print the result
    56 000000AC 48BF-                       mov     rdi, f_mul
    56 000000AE [7D00000000000000] 
    57 000000B6 F20F100425-                 movsd   xmm0, [number1]
    57 000000BB [00000000]         
    58 000000BF F20F100C25-                 movsd   xmm1, [number2]
    58 000000C4 [08000000]         
    59 000000C8 B803000000                  mov     rax, 3              ; three floats
    60 000000CD E8(00000000)                call printf
    61                                  
    62                                      ;division
    63 000000D2 F20F101425-                 movsd   xmm2, [number1]     ; double precision float into xmm
    63 000000D7 [00000000]         
    64 000000DB F20F5E1425-                 divsd   xmm2, [number2]     ; divide xmm
    64 000000E0 [08000000]         
    65                                  
    66                                      ; print the result
    67 000000E4 48BF-                       mov     rdi, f_div
    67 000000E6 [A300000000000000] 
    68 000000EE F20F100425-                 movsd   xmm0, [number1]
    68 000000F3 [00000000]         
    69 000000F7 F20F100C25-                 movsd   xmm1, [number2]
    69 000000FC [08000000]         
    70 00000100 B801000000                  mov     rax, 1              ; one float
    71 00000105 E8(00000000)                call printf
    72                                  
    73                                      ;square root
    74 0000010A F20F510C25-                 sqrtsd  xmm1, [number1]     ; sqrt double precision float in xmm
    74 0000010F [00000000]         
    75                                  
    76                                      ; print the result
    77 00000113 48BF-                       mov     rdi, f_sqrt
    77 00000115 [CA00000000000000] 
    78 0000011D F20F100425-                 movsd   xmm0, [number1]
    78 00000122 [00000000]         
    79 00000126 B802000000                  mov     rax, 2              ; two floats
    80 0000012B E8(00000000)                call printf
    81                                  
    82 00000130 4889EC                      mov     rsp, rbp
    83 00000133 5D                          pop     rbp
    84                                  
    85 00000134 C3                          ret
